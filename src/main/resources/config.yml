# ================ EasyBackUp 插件配置 ================
# 用途: 定时或手动将服务器的“目录与文件”一起打包为 ZIP
# 说明: 路径均相对服务器根目录（除非你填写绝对路径）

# 备份间隔（字符串格式，大小写均可）：示例 6H / 1D2H30M / 45S / 5M 等；
# 设为 0S 或留空视为关闭自动备份。
interval: '6H'

# 需要备份的路径（相对服务器根目录）。既可以是目录，也可以是单个文件。
# 例:
#   - world
#   - world_nether
#   - world_the_end
#   - plugins
#   - server.properties
target-save-paths:
  - 'world'

# 备份输出目录
# - 若为相对路径: 以服务器根目录为基准（默认: backups）
# - 若为绝对路径: 直接使用（兼容 Windows/Linux，如 C:\\mc\\backups 或 /data/backups）
output-dir: 'backups'

# 最大备份保留数量（防止磁盘占满）。超过数量时将自动删除最旧的备份。
max-backups: 10

# 备份时是否全服广播提示（开始/结束）
notify-players: true

# 排除规则（可选）
# 注意: 仅按名称/后缀匹配，不是通配符。
exclude-dirs: []      # 目录名（如 'logs', 'cache'）
exclude-files: []     # 文件名（如 'session.lock' 会自动跳过，这里可补充其它）
exclude-extensions: []  # 后缀名，不要带点（如 'log', 'tmp'）

# 进度与性能
progress-every-files: 500   # 每处理多少个文件在控制台输出一次进度
buffer-size-kb: 64          # 压缩缓冲区大小（越大通常越快，但更占内存）

# 智能保留策略（可选）。如果配置了 tiers，则优先按 tiers 进行“分层保留”，否则退回到 max-backups 规则。
# 设计：按从上到下的层依次选择备份，满足每层的 keep 数量与最小间隔（min-spacing），层的 window 表示从“现在”往回统计的时间窗口。
# 示例默认：总上限为 10，其中：今天(24h内)保留 4 个且最小间隔 1h；7 天内额外保留 3 个且间隔 6h；30 天内额外保留 2 个且间隔 1d；365 天内额外保留 1 个且间隔 7d。
retention:
  max-total: 10
  tiers:
    - window: '1D'     # 最近 1 天内，使用非均匀间隔：最近2个间隔1H，再下2个间隔3H/6H
      spacings: ['1H','1H','3H','6H']
    - window: '7D'     # 最近 7 天内（包含上层之外的额外选择）
      keep: 4
      min-spacing: '12H'
      growth-multiplier: 2.0
    - window: '30D'    # 最近 30 天内
      keep: 2
      min-spacing: '10D'